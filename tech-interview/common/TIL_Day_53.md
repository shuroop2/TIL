# TIL_Day_53

> 2022년 09월 28일

## 메모리 구조

- 프로그램이 실행되기 위해서는 먼저 프로그램이 메모리에 로드(load) 되어야 하며 프로그램에서 사용되는 변수들을 저장할 메모리도 필요하다.
- 따라서 컴퓨터의 운영체제는 프로그램의 실행을 위해 다양한 메모리 공간을 제공하고 있다.
- 프로그램이 운영체제로부터 할당받는 대표적인 메모리 공간은 다음과 같다.

![](http://www.tcpschool.com/lectures/img_c_memory_structure.png)

1. 스택(Stack) 영역
   - 메모리의 스택 영역은 함수의 호출과 관계되는 **지역변수와 매개변수, 리턴 값, 돌아올 주소** 등등이 저장되는 영역이다.
   - 스택 영역은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다.
   - 이렇게 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(stack frame)이라고 한다.
   - 스택 영역은 푸시(push) 동작으로 데이터를 저장하고, 팝(pop) 동작으로 데이터를 인출한다.
   - 이러한 스택은 후입선출(LIFO, Last-In-First-Out) 방식으로 동작하므로, 가장 늦게 저장된 데이터가 가장 먼저 인출된다.
   - 재귀 함수가 너무 깊게 호출되거나 함수가 지역변수를 너무 많이 가지고 있어 stack 영역을 초과하면 stack overflow 에러가 발생한다.
   - 스택 영역은 메모리가 높은 주소에서 낮은 주소의 방향으로 할당된다.
2. 힙(Heap) 영역
   - 메모리의 힙 영역은 사용자가 직접 관리할 수 있는 '그리고 해야만 하는' 메모리 영역이다.
   - 힙 영역은 사용자에 의해 메모리 공간이 동적으로 할당되고 해제된다.
   - 단, 사용하고 난 다음에는 반드시 해제해야 하며, 그렇지 않으면 memory leak이 발생한다.
   - 스택보다 할당할 수 있는 메모리 공간이 많다는 것이 장점이지만, 포인터로 메모리 영역을 접근해야 하기 때문에 다른 자료구조에 비해서 데이터를 읽고 쓰는 게 느리다.
   - 힙 영역은 메모리의 낮은 주소에서 높은 주소의 방향으로 할당된다.
3. 데이터(Data) 영역
   - 메모리의 데이터 영역은 프로그램의 전역(global) 변수와 정적(static) 변수가 저장되는 영역이다.
   - 데이터 영역은 프로그램의 시작과 함께 할당되며 프로그램이 종료되면 소멸한다.
4. 코드(Code) 영역
   - 메모리의 코드 영역은 실행할 프로그램의 코드가 저장되는 영역으로 텍스트(Text) 영역이라고도 부른다.
   - CPU는 코드 영역에 저장된 명령어를 하나씩 가져가서 처리하게 된다.